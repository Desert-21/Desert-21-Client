<div class="background">
  <app-title></app-title>

  <div class="main-container">
    <div class="form-container p-3">
      <h4>RESET PASSWORD</h4>

      <div *ngIf="!hasSucceeded">
        <h6>
          Enter here your new password and try to memorize it this time :)
        </h6>

        <form [formGroup]="resetPasswordForm">
          <div class="form-group">
            <label for="password">Password</label>
            <div class="input-group">
              <input
                [ngClass]="{
                  'is-valid': resetPasswordForm.get('password').errors === null
                }"
                type="password"
                formControlName="password"
                class="form-control"
                id="password"
                placeholder="Enter password"
              />
              <div class="input-group-append">
                <span
                  class="input-group-text"
                  id="basic-addon2"
                  placement="right"
                  ngbTooltip="Enter here your password. It should have at least 8 characters, containing at least one digit, one capital letter and one lowercase latter."
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    fill="currentColor"
                    class="bi bi-info-circle-fill"
                    viewBox="0 0 16 16"
                  >
                    <use xlink:href="#info-fill" />
                  </svg>
                </span>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="confirmPassword">Confirm password</label>
            <div class="input-group">
              <input
                type="password"
                class="form-control"
                id="confirmPassword"
                formControlName="confirmPassword"
                placeholder="Enter password again"
                [ngClass]="{
                  'is-valid':
                    resetPasswordForm.get('confirmPassword')?.errors
                      ?.confirmPasswordValidator === null
                }"
              />
              <div class="input-group-append">
                <span
                  class="input-group-text"
                  id="basic-addon2"
                  placement="right"
                  ngbTooltip="Enter your password one more time, just to make sure."
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    fill="currentColor"
                    class="bi bi-info-circle-fill"
                    viewBox="0 0 16 16"
                  >
                    <use xlink:href="#info-fill" />
                  </svg>
                </span>
              </div>
            </div>
          </div>

          <div>
            <button
              (click)="onSubmit()"
              [disabled]="!resetPasswordForm.valid || isLoading"
              type="submit"
              class="btn btn-primary"
            >
              SAVE MY NEW PASSWORD
              <span
                *ngIf="isLoading"
                class="spinner-border spinner-border-sm"
                role="status"
                aria-hidden="true"
              ></span>
            </button>
          </div>
        </form>
      </div>

      <div *ngIf="hasSucceeded">
        <h6>
          Success! You are now ready to login with your new password. Click the
          link below to go back to login page!
        </h6>
      </div>

      <a routerLink="/login" class="right-floated">Back to log in</a>
    </div>
  </div>
</div>
